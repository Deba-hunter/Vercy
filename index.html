<!-- public/index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
Â  <meta charset="UTF-8" />
Â  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
Â  <title>WhatsApp Auto Sender</title>
Â  <style>
Â  Â  body {
Â  Â  Â  margin: 0;
Â  Â  Â  font-family: 'Segoe UI', sans-serif;
Â  Â  Â  background: linear-gradient(to right, #0f2027, #203a43, #2c5364);
Â  Â  Â  color: white;
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  Â  align-items: center;
Â  Â  Â  padding: 1rem;
Â  Â  }

Â  Â  h1 {
Â  Â  Â  margin-top: 1rem;
Â  Â  Â  font-size: 1.8rem;
Â  Â  Â  color: #00ffd0;
Â  Â  Â  text-align: center;
Â  Â  }

Â  Â  #qr {
Â  Â  Â  margin: 1rem 0;
Â  Â  Â  border: 3px dashed #00ffd0;
Â  Â  Â  padding: 10px;
Â  Â  Â  background: #fff;
Â  Â  Â  text-align: center;
Â  Â  }

Â  Â  form {
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  Â  gap: 12px;
Â  Â  Â  width: 100%;
Â  Â  Â  max-width: 400px;
Â  Â  Â  background: rgba(255, 255, 255, 0.1);
Â  Â  Â  padding: 1rem;
Â  Â  Â  border-radius: 15px;
Â  Â  Â  box-shadow: 0 0 15px rgba(0, 255, 208, 0.2);
Â  Â  }

Â  Â  input[type="text"],
Â  Â  input[type="number"],
Â  Â  input[type="file"] {
Â  Â  Â  padding: 10px;
Â  Â  Â  border-radius: 8px;
Â  Â  Â  border: none;
Â  Â  Â  outline: none;
Â  Â  Â  font-size: 1rem;
Â  Â  }

Â  Â  button {
Â  Â  Â  padding: 12px;
Â  Â  Â  font-size: 1rem;
Â  Â  Â  border: none;
Â  Â  Â  border-radius: 8px;
Â  Â  Â  font-weight: bold;
Â  Â  Â  cursor: pointer;
Â  Â  }

Â  Â  .start {
Â  Â  Â  background: #00ffd0;
Â  Â  Â  color: black;
Â  Â  }

Â  Â  .stop {
Â  Â  Â  background: red;
Â  Â  Â  color: white;
Â  Â  Â  margin-top: 10px;
Â  Â  }

Â  Â  #message {
Â  Â  Â  margin-top: 15px;
Â  Â  Â  font-size: 1rem;
Â  Â  Â  text-align: center;
Â  Â  Â  background: rgba(0, 0, 0, 0.5);
Â  Â  Â  padding: 10px;
Â  Â  Â  border-radius: 10px;
Â  Â  Â  width: 100%;
Â  Â  Â  max-width: 400px;
Â  Â  Â  word-wrap: break-word;
Â  Â  }

Â  Â  .info {
Â  Â  Â  font-size: 0.85rem;
Â  Â  Â  color: #ccc;
Â  Â  Â  margin-bottom: 10px;
Â  Â  Â  text-align: center;
Â  Â  }

Â  Â  img {
Â  Â  Â  max-width: 200px;
Â  Â  Â  height: auto;
Â  Â  }
Â  </style>
</head>
<body>
Â  <h1>ğŸŸ¢ WhatsApp Auto Sender</h1>
Â  <div class="info">ğŸ“Œ Inbox: 919876543210 | Group: 12038xxx@g.us</div>

Â  <div id="qr">ğŸ”„ Loading QR...</div>

Â  <form id="sendForm">
Â  Â  <input type="text" name="receiver" placeholder="Receiver (Phone or Group JID)" required />
Â  Â  <input type="number" name="delay" placeholder="Delay (seconds)" required />
Â  Â  <input type="file" name="file" accept=".txt" required />
Â  Â  <button type="submit" class="start">ğŸš€ Start</button>
Â  </form>

Â  <button class="stop" onclick="stopSending()">ğŸ›‘ Stop</button>

Â  <div id="message">Status: Waiting...</div>

Â  <script>
Â  Â  let isConnected = false;

Â  Â  async function loadQR() {
Â  Â  Â  try {
Â  Â  Â  Â  const res = await fetch('/api/qr');
Â  Â  Â  Â  const data = await res.json();
Â  Â  Â  Â  const qrBox = document.getElementById('qr');
Â  Â  Â  Â  const msgBox = document.getElementById('message');

Â  Â  Â  Â  if (data.qr) {
Â  Â  Â  Â  Â  qrBox.innerHTML = `<img src="${data.qr}" alt="QR Code" />`;
Â  Â  Â  Â  Â  msgBox.innerText = 'ğŸ“· Scan the QR with WhatsApp to log in.';
Â  Â  Â  Â  Â  isConnected = false;
Â  Â  Â  Â  } else if (data.message.includes('authenticated')) {
Â  Â  Â  Â  Â  qrBox.innerHTML = '<b>âœ… Connected to WhatsApp!</b>';
Â  Â  Â  Â  Â  msgBox.innerText = 'ğŸŸ¢ WhatsApp session is ready.';
Â  Â  Â  Â  Â  isConnected = true;
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  qrBox.innerText = data.message;
Â  Â  Â  Â  Â  msgBox.innerText = `Status: ${data.message}`;
Â  Â  Â  Â  Â  isConnected = false;
Â  Â  Â  Â  }

Â  Â  Â  Â  setTimeout(loadQR, 3000); // auto-recheck every 3s
Â  Â  Â  } catch (e) {
Â  Â  Â  Â  document.getElementById('message').innerText = 'âš ï¸ Error loading QR.';
Â  Â  Â  Â  setTimeout(loadQR, 5000);
Â  Â  Â  }
Â  Â  }

Â  Â  loadQR();

Â  Â  document.getElementById('sendForm').addEventListener('submit', async (e) => {
Â  Â  Â  e.preventDefault();
Â  Â  Â  if (!isConnected) {
Â  Â  Â  Â  document.getElementById('message').innerText = 'âŒ WhatsApp not connected yet.';
Â  Â  Â  Â  return;
Â  Â  Â  }

Â  Â  Â  const form = e.target;
Â  Â  Â  const formData = new FormData(form);

Â  Â  Â  document.getElementById('message').innerText = 'â³ Starting message loop...';

Â  Â  Â  try {
Â  Â  Â  Â  const res = await fetch('/api/start', {
Â  Â  Â  Â  Â  method: 'POST',
Â  Â  Â  Â  Â  body: formData
Â  Â  Â  Â  });
Â  Â  Â  Â  const data = await res.json();
Â  Â  Â  Â  document.getElementById('message').innerText = data.message || data.error;
Â  Â  Â  } catch (err) {
Â  Â  Â  Â  document.getElementById('message').innerText = 'âŒ Error sending messages.';
Â  Â  Â  }
Â  Â  });

Â  Â  async function stopSending() {
Â  Â  Â  try {
Â  Â  Â  Â  const res = await fetch('/api/stop', { method: 'POST' });
Â  Â  Â  Â  const data = await res.json();
Â  Â  Â  Â  document.getElementById('message').innerText = data.message;
Â  Â  Â  } catch (err) {
Â  Â  Â  Â  document.getElementById('message').innerText = 'âŒ Failed to stop sending.';
Â  Â  Â  }
Â  Â  }
Â  </script>
</body>
</html>
